<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Portal de Propriedade Industrial — Busca</title>

<!-- GOV.BR Design System (CSS + Fonts via CDN) -->
<link rel="stylesheet" href="https://cdngovbr-ds.estaleiro.serpro.gov.br/design-system/fonts/rawline/css/rawline.css">
<link rel="stylesheet" href="https://cdngovbr-ds.estaleiro.serpro.gov.br/design-system/dist/design-system.min.css">

<!-- Raleway (mesmo da tela de detalhe) -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:wght@500;700;800&display=swap">

<!-- Font Awesome (ícones) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

<style>
:root{
  /* Tokens base (alinhados ao detalhe) */
  --title:#3d4a63; --muted:#6b7280; --line:#e5e7eb; --edge:#d8dce3; --card:#fbfdff; --accent:#1f2937;

  /* Botões no padrão GOV.BR */
  --govbr-blue:#1351B4;
  --govbr-blue-hover:#0D3B8E;
  --govbr-blue-ghost:#E6EEFF;
  --govbr-focus:#79B0FF;
}

/* Base */
body{font-family:Rawline, Raleway, Arial, sans-serif;background:#fff}
.container-lg{max-width:1200px;margin:0 auto}

/* Header minimalista (mesmo da detalhe) */
.mini-header{border-bottom:1px solid var(--line)}
.mini-header .container-lg{display:flex;align-items:center;justify-content:space-between;padding:.6rem 1rem}
.brand{display:flex;align-items:center;gap:.5rem}
.brand .logo{width:36px;height:28px;background:var(--accent);border-radius:6px;display:grid;place-items:center;color:#fff;font-weight:800;font-size:.8rem}
.brand .title{color:#374151;font-weight:600}
.links{display:flex;gap:1rem;align-items:center}
.links a{color:var(--muted);font-size:.85rem;text-decoration:none}
.links .enter{border:1px solid #d1d5db;padding:.35rem .7rem;border-radius:999px}
input, select, textarea { box-sizing: border-box; max-width: 100%; }

/* Cards de seção (padrão detalhe) */
section{border:1px solid var(--edge);border-radius:18px;background:#fff;margin:1rem 0;padding:0}
section>h2{
  margin:0;padding:.85rem 1rem;background:#f8fafc;border-bottom:1px solid var(--line);
  font-family:Raleway, Rawline, sans-serif;font-weight:800;letter-spacing:.01em;color:#1f2937;
  font-size:clamp(1.1rem,2vw + .4rem,1.4rem);
  border-top-left-radius:18px;border-top-right-radius:18px
}
section>*:not(h2){padding:1rem}

/* Botões (GOV.BR) — sem “composes”, sem duplicação */
.btn,
section .actions .search,
section .actions .clear,
.add-criteria button{
  display:inline-flex;align-items:center;gap:.5rem;
  font-weight:700;font-size:.95rem;line-height:1;
  border-radius:999px;height:40px;padding:0 .95rem;
  border:2px solid transparent;cursor:pointer;text-decoration:none;
  transition:background .15s,border-color .15s,color .15s,box-shadow .15s
}
.btn i,
section .actions .search i,
section .actions .clear i,
.add-criteria button i{font-size:1rem}

/* Primário (Buscar / Adicionar critério) */
section .actions .search,
.add-criteria button{
  background:var(--govbr-blue);color:#fff;border-color:var(--govbr-blue)
}
section .actions .search:hover,
.add-criteria button:hover{
  background:var(--govbr-blue-hover);border-color:var(--govbr-blue-hover)
}

/* Contornado (Limpar) */
section .actions .clear,
.btn.outline{
  background:#fff;color:var(--govbr-blue);border-color:var(--govbr-blue)
}
section .actions .clear:hover,
.btn.outline:hover{background:var(--govbr-blue-ghost)}

/* Foco acessível */
.btn:focus-visible,
section .actions .search:focus-visible,
section .actions .clear:focus-visible,
.add-criteria button:focus-visible{
  outline:3px solid var(--govbr-focus);outline-offset:2px
}

/* Busca rápida */
.quick-search input[type="text"],
.quick-search input[type="search"]{
  width:100%;height:44px;background:#fff;border:1px solid var(--edge);border-radius:10px;
  padding:.55rem .75rem;font-size:.95rem;color:#111827;box-shadow:inset 0 1px 0 rgba(17,24,39,.02)
}
.quick-search input:focus{
  outline:0;border-color:#b7c6e6;box-shadow:0 0 0 3px rgba(19,81,180,.18)
}

/* Ações (layout) */
section .actions{display:flex;gap:.5rem;padding:0 1rem 1rem}

/* Busca estruturada */
#criteria-list{display:grid;row-gap:.5rem;margin:0 1rem}
.structured-search .criteria{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;margin:0}
.structured-search select,
.structured-search input{
  padding:.45rem .6rem;border:1px solid var(--edge);border-radius:10px;font-size:.9rem
}
.structured-search select:focus,
.structured-search input:focus{
  outline:0;border-color:#b7c6e6;box-shadow:0 0 0 3px rgba(19,81,180,.18)
}

/* Botões ícone + tooltip */
.icon-btn{
  position:relative;background:#fff;border:1px solid var(--edge);border-radius:999px;
  padding:.35rem .6rem;cursor:pointer;color:#475569
}
.icon-btn .tooltiptext{
  position:absolute;left:50%;bottom:125%;transform:translateX(-50%);
  background:#333;color:#fff;border-radius:4px;padding:.5rem;font-size:.85rem;
  width:max-content;max-width:260px;opacity:0;visibility:hidden;transition:opacity .2s
}
.icon-btn:hover .tooltiptext{opacity:1;visibility:visible}

/* Sumário */
.summary{background:#eef5ff;border:1px solid #cfe0ff;border-radius:10px;margin:0 1rem 1rem;padding:.75rem;font-size:.9rem;color:#1f2c4c}

/* Footer */
.mini-footer{border-top:1px solid var(--line);padding:1.25rem 0;color:var(--muted);text-align:center}


</style>
</head>
<body>

<!-- topo -->
<div class="mini-header">
  <div class="container-lg">
    <div class="brand">
      <div class="logo">PI</div>
      <div class="title">Portal de Propriedade Industrial</div>
    </div>
    <div class="links">
      <a href="#">Link de acesso 1</a>
      <a href="#">Link de acesso 2</a>
      <a href="#">Link de acesso 3</a>
      <a href="#">Link de acesso 4</a>
      <a href="#" class="enter"><i class="fa-regular fa-user"></i> Entrar</a>
    </div>
  </div>
</div>

<main class="container-lg" style="padding:1rem">

  <!-- Busca Rápida -->
  <section class="quick-search" aria-labelledby="qs-title">
    <h2 id="qs-title">Busca Rápida</h2>
    <div>
      <input type="text" placeholder="Digite termos para busca rápida...">
    </div>
    <div class="actions">
      <button class="search" type="button" onclick="doSearch()">Buscar</button>
      <button class="clear" type="button" onclick="clearQuick()">Limpar</button>
    </div>
  </section>

  <!-- Busca Estruturada -->
  <section class="structured-search" aria-labelledby="as-title">
    <h2 id="as-title">Busca Avançada</h2>

    <div id="criteria-list"></div>

    <div class="add-criteria">
      <button type="button" onclick="addCriteria()">+ Adicionar critério</button>
    </div>

    <div class="actions">
      <button class="search" type="button" onclick="doSearch()">Buscar</button>
      <button class="clear" type="button" onclick="clearAll()">Limpar</button>
    </div>

    <div class="summary" id="summary">Nenhum critério definido.</div>
  </section>

</main>

<footer class="mini-footer">
  <div class="container-lg">© INPI • Protótipo de interface — somente para validação de UX</div>
</footer>

<script>
/* ======== LÓGICA ORIGINAL PRESERVADA ======== */
const fields = {
  "Marca": [
    {label: "Nome da marca", type: "text", placeholder: "Ex.: CarMatch", operators: ["é igual", "contém", "começa com"], hint: "Digite o nome da marca que deseja pesquisar."},
    {label: "Classificação de Nice (NCL)", type: "text", placeholder: "Ex.: 35", operators: null, hint: "Número da Classificação de Nice, entre 1 e 45."}
  ],
  "Número": [
    {label: "Nº do processo", type: "text", placeholder: "912345678", operators: null, hint: "Número único do processo (9 dígitos)."},
    {label: "Nº da GRU", type: "text", placeholder: "123456789", operators: null, hint: "Número da Guia de Recolhimento da União (9 dígitos)."},
    {label: "Nº do protocolo", type: "text", placeholder: "2025.00001234", operators: null, hint: "Formato: AAAA.NNNNNNNN"},
    {label: "Inscrição internacional", type: "text", placeholder: "BR/2025/000123", operators: null, hint: "Número de inscrição internacional."}
  ],
  "Titular": [
    {label: "CPF/CNPJ", type: "text", placeholder: "Somente números", operators: null, hint: "Digite o CPF ou CNPJ sem pontuação."},
    {label: "Nome do titular", type: "text", placeholder: "Ex.: Francisco Machado", operators: ["é igual", "contém"], hint: "Digite o nome do titular."}
  ],
  "Imagem": [
    {label: "Classificação de Viena (CFE)", type: "text", placeholder: "01.01", operators: null, hint: "Código de Classificação de Viena (até 3 grupos)."},
    {label: "NCL (opcional) para imagem", type: "text", placeholder: "Ex.: 35", operators: null, hint: "Número da Classificação de Nice para imagem."}
  ]
};

function addCriteria() {
  const criteriaList = document.getElementById('criteria-list');
  const div = document.createElement('div');
  div.className = 'criteria';

  const hintBtn = document.createElement('button');
  hintBtn.className = 'icon-btn';
  hintBtn.type = 'button';
  hintBtn.innerHTML = '<i class="fas fa-info-circle"></i><span class="tooltiptext">Ajuda do campo</span>';
  div.appendChild(hintBtn);

  const fieldSelect = document.createElement('select');
  for (let group in fields) {
    const optgroup = document.createElement('optgroup');
    optgroup.label = group;
    fields[group].forEach((f, idx) => {
      const opt = document.createElement('option');
      opt.value = group + '|' + idx;
      opt.textContent = f.label;
      optgroup.appendChild(opt);
    });
    fieldSelect.appendChild(optgroup);
  }
  fieldSelect.onchange = () => updateField(div, fieldSelect.value, hintBtn);
  div.appendChild(fieldSelect);

  const operatorSelect = document.createElement('select');
  div.appendChild(operatorSelect);

  const input = document.createElement('input');
  div.appendChild(input);

  const andOrSelect = document.createElement('select');
  ["E", "OU"].forEach(op => {
    const opt = document.createElement('option');
    opt.value = op;
    opt.textContent = op;
    andOrSelect.appendChild(opt);
  });
  div.appendChild(andOrSelect);

  const removeBtn = document.createElement('button');
  removeBtn.className = 'icon-btn';
  removeBtn.innerHTML = '<i class="fas fa-trash"></i><span class="tooltiptext">Excluir critério</span>';
  removeBtn.onclick = () => { div.remove(); updateSummary(); };
  div.appendChild(removeBtn);

  criteriaList.appendChild(div);
  updateField(div, fieldSelect.value, hintBtn);
}

function updateField(div, value, hintBtn) {
  const [group, idx] = value.split('|');
  const fieldData = fields[group][idx];

  hintBtn.querySelector('.tooltiptext').textContent = fieldData.hint;

  const operatorSelect = div.children[2];
  operatorSelect.innerHTML = '';

  const showOperator = Array.isArray(fieldData.operators) &&
                       !(fieldData.operators.length === 1 && fieldData.operators[0] === 'é igual');

  if (showOperator) {
    fieldData.operators.forEach(op => {
      const opt = document.createElement('option');
      opt.value = op;
      opt.textContent = op;
      operatorSelect.appendChild(opt);
    });
    operatorSelect.style.display = '';
  } else {
    operatorSelect.style.display = 'none';
    operatorSelect.value = '';
  }

  const input = div.children[3];
  input.type = fieldData.type;
  input.placeholder = fieldData.placeholder;
  input.value = '';

  updateSummary();
}

function updateSummary() {
  const criteriaList = document.getElementById('criteria-list').children;
  if (criteriaList.length === 0) {
    document.getElementById('summary').textContent = 'Nenhum critério definido.';
    return;
  }
  let summary = [];
  Array.from(criteriaList).forEach(div => {
    const field = div.children[1].selectedOptions[0].textContent;
    const operator = div.children[2].style.display === 'none' ? '' : div.children[2].value;
    const value = div.children[3].value || '…';
    const connector = div.children[4].value;
    summary.push(`${field} ${operator} "${value}" (${connector})`);
  });
  document.getElementById('summary').textContent = summary.join(' ');
}

function doSearch() { alert('Executando busca com os critérios definidos.'); }
function clearAll() { document.getElementById('criteria-list').innerHTML = ''; updateSummary(); }
function clearQuick() { document.querySelector('.quick-search input').value = ''; }
</script>
</body>
</html>
